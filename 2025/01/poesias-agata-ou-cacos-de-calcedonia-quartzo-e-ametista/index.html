<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Poesias: √Ågata ou Cacos de calced√¥nia, quartzo e ametista</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/style.css">

  <style>
    body.locked { overflow: hidden; }
    body.locked .nav-links,
    body.locked .nav-burger { display: none; }

    #gate {
      position: fixed;
      inset: 0;
      background: rgba(255,255,255,0.97);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    #gate form {
      max-width: 420px;
      width: 100%;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    #gate h1 { text-align: center; font-weight: normal; }
    #gate p { text-align: center; font-size: 0.9rem; opacity: 0.8; }

    #gate input,
    #gate textarea {
      font-size: 1rem;
      padding: 0.6rem;
      width: 100%;
    }

    #gate button {
      background: #111;
      color: #fff;
      border: none;
      padding: 0.6rem;
      cursor: pointer;
    }

    #wait-message {
      font-size: 0.85rem;
      text-align: center;
      color: #555;
      display: none;
    }
  </style>
</head>

<body class="locked">

<header class="site-header">
  <nav class="nav">
    <div class="nav-inner">
      <a href="/" class="site-title">ameopoema</a>
      <ul class="nav-links">
        <li><a href="/">In√≠cio</a></li>
        <li><a href="/haicais/">Haicais</a></li>
        <li><a href="/poesias/">Poesias</a></li>
        <li><a href="/textos/">Textos</a></li>
        <li><a href="/print/">Livros</a></li>
        <li><a href="#" onclick="openGate(event)">Contato</a></li>
      </ul>
    </div>
  </nav>
</header>

<div id="gate">
  <form id="gate-form" novalidate>
    <h1 class="site-title">ameopoema</h1>
    <p>Palavras abrem portas. Deixe sua mensagem :)</p>

    <input type="text" id="name" placeholder="Seu nome">
    <input type="email" id="email" placeholder="Seu email">
    <textarea id="message" rows="5" placeholder="Escreva algo para entrar"></textarea>

    <input type="text" id="website" style="display:none">

    <button type="submit">Entrar</button>

    <div id="wait-message">
      <p class="wait-text"></p>
    </div>

    <iframe name="hidden_iframe" style="display:none;"></iframe>
  </form>
</div>

<main class="site-main">
  
<article>
  <h1>Poesias: √Ågata ou Cacos de calced√¥nia, quartzo e ametista
    <time datetime="Wed Jan 15 2025 08:11:00 GMT+0000 (Coordinated Universal Time)">15/01/2025</time>
  </h1>
  <p></p>
  <div>Um dia, a vida destruiu,&nbsp;</div><div>E o cruel calor da Terra √† engoliu.</div><div>A rocha mais dura que o mundo j√° viu.</div><div>E Tempo pior jamais existiu.</div><div><br></div><div>Atropelada, machucada e cansada.</div><div>Em cacos e pela pressao sufocada.</div><div>Abandonada, culpada e esquecida.</div><div>Sofria a pobre rocha derretida.</div><div><br></div><div>Num vol√°til mundo de lava,</div><div>Acreditou que nada lhe restava,</div><div>Abatida, engatilhada e desesperada,</div><div>Retorcida e esmigalhada&nbsp;</div><div>Foi convencida que em exist√™ncia, era digna apenas do nada.</div><div><br></div><div>Mas aqui, caro leitor, ainda nao acaba essa est√≥ria,</div><div>Guarde com zelo e amor os proximos versos de nossa memoria.</div><div><br></div><div>A pobre, que s√≥ via nos outros vit√≥ria,</div><div>Que n√£o se dava conta da pr√≥pria gl√≥ria</div><div>Ou do que seria o seu vir-a-ser.</div><div><br></div><div>Dos caquinhos, de beleza apote√≥tica,</div><div>A M√£e Terra, de sua maneira ca√≥tica,</div><div>Lapidou a mais colorida,</div><div>Em do√ßura e gentileza vestida,</div><div>Mais dura pedra jamais esculpida.</div><div><br></div><div>A Agata, formada em vida-vulc√£o,</div><div>Camada mil de cristaliza√ß√£o,</div><div>Enche os olhos e o cora√ß√£o.</div><div>De todos que toca com sua vida.</div>
</article>
</main>

<footer class="site-footer">
  <p>¬© 2026 Ameopoema</p>
</footer>

<script>
  const FORM_ACTION =
    "https://docs.google.com/forms/d/e/1FAIpQLScItpjJxsc4GOYWayWwVU-CEyxrwA_7FQtRDO_9ZB1r8rh-0w/formResponse";

  const MIN_INTERVAL = 60 * 1000;
  const STORAGE_KEY = "ameopoema_last_submit";
  const SESSION_KEY = "ameopoema_unlocked";

  const waitBox = document.getElementById("wait-message");
  const waitText = waitBox.querySelector(".wait-text");

  const spamWords = ["viagra","bitcoin","crypto","casino","ganhe dinheiro","free money","porn"];

  // üîì Se j√° desbloqueou nessa sess√£o, abre direto
  if (sessionStorage.getItem(SESSION_KEY)) {
    unlock();
  }

  document.getElementById("gate-form").addEventListener("submit", function (e) {
    e.preventDefault();
    hideWait();

    if (document.getElementById("website").value) return;

    const name = get("name");
    const email = get("email");
    const message = get("message");

    if (!name || !email || !message) {
      return showWait("Todos os campos precisam ser preenchidos.");
    }

    if (!validEmail(email)) {
      return showWait("O email n√£o parece v√°lido.");
    }

    if (looksLikeSpam(message)) {
      return showWait("Essa mensagem parece autom√°tica demais.");
    }

    const last = localStorage.getItem(STORAGE_KEY);
    const now = Date.now();

    if (last && now - last < MIN_INTERVAL) {
      return showWait(
        "A poesia habita no sil√™ncio entre os versos.<br>Tente novamente daqui a 1 minuto."
      );
    }

    const form = document.createElement("form");
    form.method = "POST";
    form.action = FORM_ACTION;
    form.target = "hidden_iframe";

    form.innerHTML = `
      <input type="hidden" name="entry.409672853" value="${escapeHTML(name)}">
      <input type="hidden" name="entry.2040541815" value="${escapeHTML(email)}">
      <input type="hidden" name="entry.739396940" value="${escapeHTML(message)}">
    `;

    document.body.appendChild(form);
    form.submit();
    document.body.removeChild(form);

    localStorage.setItem(STORAGE_KEY, now.toString());
    sessionStorage.setItem(SESSION_KEY, "1"); // üîê marca sess√£o

    unlock();
  });

  function get(id) {
    return document.getElementById(id).value.trim();
  }

  function validEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(email);
  }

  function looksLikeSpam(text) {
    if (text.length < 8) return true;
    if ((text.match(/https?:\/\//g) || []).length > 2) return true;
    if (/([a-zA-Z])\1{7,}/.test(text)) return true;

    const lower = text.toLowerCase();
    return spamWords.some(w => lower.includes(w));
  }

  function showWait(msg) {
    waitText.innerHTML = msg;
    waitBox.style.display = "block";
  }

  function hideWait() {
    waitBox.style.display = "none";
  }

  function unlock() {
    document.getElementById("gate").style.display = "none";
    document.body.classList.remove("locked");
  }

  function openGate(e) {
    e.preventDefault();
    document.getElementById("gate").style.display = "flex";
    document.body.classList.add("locked");
  }

  function escapeHTML(str) {
    return str
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#039;");
  }
</script>

</body>
</html>
